{% extends 'shop/base.html' %}
{% load i18n static %}

{% block title %}
{{ product.name }}
{% endblock %}

{% block content %}
<div class="container">
    <article class="product-detail">
        <div class="product-detail__image">
            <img class="product-detail__img"
                src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}"
                alt="{{ product.name }}" />
        </div>

        <div class="product-detail__desc">
            <h1 class="product-detail__title">{{ product.name }}</h1>

            <h2 class="product-detail__category">
                <a href="{{ product.category.get_absolute_url }}">{{ product.category.name }}</a>
            </h2>

            <p class="product-detail__price">${{ product.price }}</p>

            <div class="product-detail__action">
                <form action="{% url 'cart:cart_add' product.id %}" method="post" class="product-detail__form">
                    {% csrf_token %}
                    {{ cart_product_form }}
                    <button type="submit" class="btn btn--primary">
                        {% translate 'Add to cart' %}
                    </button>
                </form>
            </div>

            <div class="product-detail__description">
                {{ product.description|linebreaks }}
            </div>
        </div>
    </article>

    {% if recommended_products %}
    <section class="product-recommendations">
        <h3 class="product-recommendations__title">{% translate 'People who bought this also bought' %}</h3>
        <div class="product-recommendations__list">
            {% for p in recommended_products %}
            <article class="product-recommendations__item">
                <a href="{{ p.get_absolute_url }}" class="product-recommendations__link">
                    <img class="product-recommendations__img"
                        src="{% if p.image %}{{ p.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}"
                        alt="{{ p.name }}" />
                    <p class="product-recommendations__name">{{ p.name }}</p>
                </a>
            </article>
            {% endfor %}
        </div>
    </section>
    {% endif %}
</div>

{% endblock %}